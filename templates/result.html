<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Classification Result</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: #d4d0e8;
            min-height: 100vh;
            padding: 0;
        }

        .header {
            background: #3366cc;
            color: white;
            padding: 25px 20px;
            text-align: center;
        }

        .header h1 {
            font-size: 2.2rem;
            font-weight: 700;
            margin: 0;
        }

        .header p {
            margin: 8px 0 0 0;
            font-size: 0.95rem;
            opacity: 0.95;
        }

        .nav-buttons {
            display: flex;
            gap: 15px;
            justify-content: center;
            padding: 20px;
            flex-wrap: wrap;
            background: #d4d0e8;
        }

        .nav-btn {
            padding: 12px 28px;
            border: none;
            border-radius: 25px;
            background: white;
            color: #333;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            gap: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            font-size: 0.95rem;
        }

        .nav-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(0,0,0,0.15);
            color: #3366cc;
        }

        .main-container {
            max-width: 1000px;
            margin: 0 auto 30px auto;
            background: white;
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 5px 25px rgba(0,0,0,0.1);
        }

        .language-section {
            background: white;
            padding: 18px 20px;
            text-align: center;
            border-bottom: 2px solid #f0f0f0;
        }

        .language-section p {
            margin: 0 0 12px 0;
            font-weight: 600;
            color: #555;
            font-size: 0.95rem;
        }

        .lang-btn {
            padding: 10px 30px;
            margin: 0 8px;
            border: 2px solid #3366cc;
            border-radius: 25px;
            background: #3366cc;
            color: white;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 0.9rem;
        }

        .lang-btn:hover {
            background: #2952a3;
            border-color: #2952a3;
        }

        .lang-btn.inactive {
            background: white;
            color: #3366cc;
        }

        .result-section {
            padding: 35px 30px;
            background: white;
        }

        .result-title {
            text-align: center;
            font-size: 1.9rem;
            font-weight: 700;
            margin-bottom: 25px;
            color: #2c2c2c;
        }

        .audio-controls {
            text-align: center;
            margin-bottom: 25px;
        }

        .audio-btn {
            padding: 12px 30px;
            margin: 0 8px;
            border: none;
            border-radius: 25px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 0.9rem;
            display: inline-flex;
            align-items: center;
            gap: 8px;
        }

        .play-btn {
            background: #10b981;
            color: white;
        }

        .play-btn:hover {
            background: #059669;
            transform: translateY(-2px);
        }

        .stop-btn {
            background: #ef4444;
            color: white;
        }

        .stop-btn:hover {
            background: #dc2626;
            transform: translateY(-2px);
        }

        /* Category Badge - Shows Category Name + Percentage */
        .category-badge {
            padding: 60px 40px;
            border-radius: 15px;
            text-align: center;
            margin-bottom: 30px;
            position: relative;
        }

        .category-badge.organic {
            background: #5eb56f;
            color: white;
        }

        .category-badge.recyclable {
            background: #5ba3f5;
            color: white;
        }

        .category-icon {
            font-size: 4rem;
            margin-bottom: 15px;
        }

        .category-name {
            font-size: 2.2rem;
            font-weight: 700;
            margin-bottom: 18px;
            letter-spacing: 0.5px;
        }

        .confidence-value {
            font-size: 2rem;
            font-weight: 700;
            background: rgba(255,255,255,0.35);
            padding: 12px 35px;
            border-radius: 30px;
            display: inline-block;
        }

        .info-box {
            background: #f5f5f5;
            border-left: 4px solid #3366cc;
            padding: 16px 20px;
            margin-bottom: 16px;
            border-radius: 6px;
        }

        .info-box h3 {
            font-size: 0.95rem;
            font-weight: 700;
            margin-bottom: 8px;
            color: #333;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .info-box p {
            margin: 0;
            color: #666;
            line-height: 1.6;
            font-size: 0.9rem;
        }

        .info-icon {
            font-size: 1rem;
        }

        @media (max-width: 768px) {
            .header h1 { font-size: 1.8rem; }
            .category-name { font-size: 1.8rem; }
            .confidence-value { font-size: 1.5rem; }
            .nav-btn, .audio-btn { padding: 10px 20px; font-size: 0.85rem; }
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>Smart Food Waste Classifier</h1>
        <p>AI-Powered Waste Sorting Assistant</p>
    </div>

    <div class="nav-buttons">
        <a href="/dashboard" class="nav-btn">
            <i class="fas fa-home"></i> Home
        </a>
        <a href="/upload" class="nav-btn">
            <i class="fas fa-upload"></i> Upload Image
        </a>
        <a href="/camera" class="nav-btn">
            <i class="fas fa-camera"></i> Camera
        </a>
        <a href="/logout" class="nav-btn">
            <i class="fas fa-sign-out-alt"></i> Logout
        </a>
    </div>

    <div class="main-container">
        <div class="language-section">
            <p><i class="fas fa-volume-up"></i> Audio Language / ಆಡಿಯೋ ಭಾಷೆ</p>
            <button class="lang-btn" id="englishBtn" onclick="setLanguage('english')">English</button>
            <button class="lang-btn inactive" id="teluguBtn" onclick="setLanguage('telugu')">తెలుగు</button>
        </div>

        <div class="result-section">
            <h2 class="result-title">Classification Result</h2>

            <div class="audio-controls">
                <button class="audio-btn play-btn" onclick="playAudio()">
                    <i class="fas fa-play"></i> Play Audio
                </button>
                <button class="audio-btn stop-btn" onclick="stopAudio()">
                    <i class="fas fa-stop"></i> Stop
                </button>
            </div>

            <!-- Category Badge with Icon, Name, and Percentage -->
            {% set display_category = result.class if result else category %}
            {% set display_confidence = result.confidence if result else confidence %}
            
            <div class="category-badge {{ 'organic' if (display_category == 'Organic' or display_category == 'ORGANIC') else 'recyclable' }}">
                <div class="category-icon">
                    {% if display_category == 'Organic' or display_category == 'ORGANIC' %}
                    <i class="fas fa-leaf"></i>
                    {% else %}
                    <i class="fas fa-recycle"></i>
                    {% endif %}
                </div>
                <div class="category-name">{{ display_category|upper }}</div>
                <div class="confidence-value">{{ display_confidence }}%</div>
            </div>

            <!-- Description -->
            <div class="info-box">
                <h3><i class="fas fa-file-alt info-icon"></i> Description:</h3>
                <p>
                    {% if result and result.info %}
                        {{ result.info.description }}
                    {% elif display_category == 'Organic' or display_category == 'ORGANIC' %}
                        This waste is compostable and can decompose naturally.
                    {% else %}
                        This item can be recycled and reprocessed into new materials.
                    {% endif %}
                </p>
            </div>

            <!-- How to Dispose -->
            <div class="info-box">
                <h3><i class="fas fa-trash-alt info-icon"></i> How to Dispose:</h3>
                <p>
                    {% if result and result.info %}
                        {{ result.info.disposal }}
                    {% elif display_category == 'Organic' or display_category == 'ORGANIC' %}
                        Place in green/brown composting bin
                    {% else %}
                        Place in blue recycling bin
                    {% endif %}
                </p>
            </div>

            <!-- Examples -->
            <div class="info-box">
                <h3><i class="fas fa-lightbulb info-icon"></i> Examples:</h3>
                <p>
                    {% if result and result.info %}
                        {{ result.info.examples }}
                    {% elif display_category == 'Organic' or display_category == 'ORGANIC' %}
                        Food scraps, fruit peels, vegetable waste, coffee grounds
                    {% else %}
                        Plastic bottles, paper, cardboard, aluminum cans, glass containers
                    {% endif %}
                </p>
            </div>

            <!-- Environmental Impact -->
            <div class="info-box">
                <h3><i class="fas fa-globe info-icon"></i> Environmental Impact:</h3>
                <p>
                    {% if result and result.info %}
                        {{ result.info.environmental_impact }}
                    {% elif display_category == 'Organic' or display_category == 'ORGANIC' %}
                        Creates nutrient-rich compost, reduces landfill methane emissions
                    {% else %}
                        Conserves natural resources, reduces energy consumption, minimizes landfill waste
                    {% endif %}
                </p>
            </div>
        </div>
    </div>

    <script>
        let currentLanguage = 'english';
        let audioPlaying = false;

        function setLanguage(lang) {
            currentLanguage = lang;
            const englishBtn = document.getElementById('englishBtn');
            const teluguBtn = document.getElementById('teluguBtn');
            
            if (lang === 'english') {
                englishBtn.classList.remove('inactive');
                teluguBtn.classList.add('inactive');
            } else {
                englishBtn.classList.add('inactive');
                teluguBtn.classList.remove('inactive');
            }
        }

        function playAudio() {
            if (audioPlaying) stopAudio();
            audioPlaying = true;
            
            const category = "{{ display_category }}";
            const confidence = "{{ display_confidence }}";
            
            let text = currentLanguage === 'telugu' 
                ? (category === 'Organic' || category === 'ORGANIC' ? `ಆರ್ಗಾನಿಕ್. ${confidence} ಶೇಕಡ.` : `ರೀಸೈಕಲ್. ${confidence} ಶೇಕಡ.`)
                : `${category} waste detected with ${confidence} percent confidence.`;
            
            const utterance = new SpeechSynthesisUtterance(text);
            utterance.lang = currentLanguage === 'telugu' ? 'kn-IN' : 'en-US';
            utterance.rate = 0.85;
            utterance.pitch = 1.0;
            utterance.onend = () => audioPlaying = false;
            
            window.speechSynthesis.speak(utterance);
        }

        function stopAudio() {
            window.speechSynthesis.cancel();
            audioPlaying = false;
        }
    </script>
</body>
</html>
